# NiceGUI → Rust 完全再現 差異分析レポート

**作成日**: 2026-02-10
**目的**: NiceGUI版（main.py 4,466行）との差異を全て洗い出し、完全再現に向けた修正計画を策定する

---

## 1. タブ名の差異（3/8が改変されている）

| # | NiceGUI版（正） | Rust版（現状） | 要修正 |
|---|----------------|---------------|--------|
| 1 | 📊 市場概況 | 市場概況 | 絵文字追加 |
| 2 | 👥 人材属性 | 人口動態 | ❌ 名前が違う |
| 3 | 🗺️ 地域・移動パターン | 人材移動 | ❌ 名前が違う |
| 4 | ⚖️ 需給バランス | 需給バランス | 絵文字追加 |
| 5 | 📈 雇用形態分析 | 働き方 | ❌ 名前が違う |
| 6 | 🗺️ 求人地図 | 求人マップ | ❌ 名前が違う |
| 7 | 📍 人材地図 | 人材マップ | ❌ 名前が違う |
| 8 | 🔍 競合調査 | 競合調査 | 絵文字追加 |

---

## 2. グローバル共通要素の差異

| 要素 | NiceGUI版 | Rust版 | 差異 |
|------|----------|--------|------|
| アプリタイトル | job_ap_analyzer_gui | 求職者データ分析 | ❌ |
| ログイン表示 | ログイン: {email} | {email} | ❌ |
| ログアウトボタン | ログアウト(flat) | ログアウト(link) | 軽微 |
| 職種ラベル | 職種(icon: work) | (セレクタのみ) | ❌ icon欠落 |
| 地域ラベル | 地域選択(icon: location_on) | (セレクタのみ) | ❌ icon欠落 |
| 市区町村デフォルト | すべて | 全市区町村 | ❌ テキスト違い |
| 職種リスト12種 | 介護職,看護師,...調理師 | 同じ12種 | ✅ |
| 都道府県順序 | JIS北→南順 | ABC順 | ❌ 順序違い |

---

## 3. タブ1: 市場概況 - 差異

### 存在する機能
| 機能 | NiceGUI版 | Rust版 | 一致 |
|------|----------|--------|------|
| セクションヘッダー | 総合概要 | 市場概況 | ❌ テキスト違い |
| 採用課題診断カード | 🎯 採用課題診断 | 📋 採用課題診断 | ❌ icon違い |
| 診断詳細（issues配列） | 最大3件のlabel/detail | messageのみ | ❌ 詳細欠落 |
| 3層比較パネル | 全国 vs 県 vs 市区町村 | 全国 vs 県のみ | ❌ 市区町村層欠落 |
| 比較メトリクス | 希望勤務地数/平均移動距離/資格保有数 | 希望勤務地数/移動距離/資格数/年齢/男女比 | ❌ 項目違い |
| 比較の性別比率セクション | 男女%+バー | 男女%テキスト | ❌ バー欠落 |
| 比較の年齢層分布グラフ | 3層グループbar | なし | ❌ 欠落 |
| KPIカード | 求職者数/平均年齢/男女比 | 求職者数(全国)/平均年齢/男性/女性 | ❌ ラベル違い |
| 2段目KPI | なし | 希望勤務地数/資格数/移動距離 | Rust版独自追加 |
| 性別構成ドーナツ | ✅ | ✅ | ✅ |
| 年齢帯別分布bar | ✅ | ✅ | ラベル違い(帯→層) |
| 年齢層×性別bar | ✅ | ✅ | ✅ |

### NiceGUI版の色定義
- 男性: #0072B2、女性: #E69F00
- Rust版: 男性: #0ea5e9、女性: #ec4899 → ❌ 色が違う

---

## 4. タブ2: 人材属性 - 差異（最も差異が大きい）

### 存在する機能
| 機能 | NiceGUI版 | Rust版 | 一致 |
|------|----------|--------|------|
| セクションヘッダー | ペルソナ分析 | 人口動態 | ❌ |
| 言語化カード4種 | 👤採用ターゲット/⏰タイミング/📜資格戦略/💎隠れた人材 | 🎯ターゲット/📜資格/💎隠れた人材 | ❌ タイミング欠落、icon違い |

### 完全欠落機能
| # | 機能 | 説明 |
|---|------|------|
| 1 | 全ペルソナ内訳リスト | 全ペルソナ100%のリスト表示 |
| 2 | 資格詳細（全資格一覧） | 定着率+解釈付きの全資格リスト |
| 3 | KPIカード3枚 | 女性比率/平均資格数/平均移動距離 |
| 4 | 年齢・性別×就業状態別内訳 Top10 | stacked bar（就業中/離職中/在学中） |
| 5 | 保有資格ペルソナ（Top10男女別） | 横棒グラフ |
| 6 | ペルソナシェア（年齢×性別） | 横棒+シェアバッジ |
| 7 | 希望勤務地数・資格保有数リスト | 年齢×性別ごとの平均値 |
| 8 | 人材組み合わせ分析（レアリティ） | 年代/性別/資格の複合検索UI+結果 |

### 存在するが差異がある機能
| 機能 | NiceGUI版 | Rust版 |
|------|----------|--------|
| 年齢×性別bar | stacked (stack=total) | grouped |
| 資格分布 | 全資格一覧（リスト形式） | 上位10横棒グラフ |
| ペルソナ構成比 | 横棒グラフ(上位10) | 横棒グラフ(上位10) ✅ |

---

## 5. タブ3: 地域・移動パターン - 差異

### 存在する機能
| 機能 | NiceGUI版 | Rust版 | 一致 |
|------|----------|--------|------|
| 採用圏言語化 | 🌐 採用圏の言語化 | 🗺️ 採用圏分析 | ❌ icon/テキスト違い |
| 言語化KPI | 地元志向率/主要流入元/採用圏拡大提案 | 地元志向率テキスト+流入/流出リスト | ❌ フォーマット違い |
| フローKPI 4枚 | 流入(就職希望)/地元志向率/流出(他地域希望)/人材吸引力 | 流入人数/地元志向率/流出人数/純流入 | ❌ ラベル違い |
| 流入元・流出先リスト | 上位5件 | 上位5件 | ✅ |
| 居住地→希望地フロー | 都道府県間+市区町村間 Top10 | 都道府県間のみ Top10 | ❌ 市区町村間欠落 |
| 移動パターン分布 | bar | ドーナツ | ❌ チャートtype違い |
| 距離統計KPI | 25%点/中央値/75%点 | 平均/25P/中央値/75P | ❌ ラベル違い |

### 完全欠落機能
| # | 機能 | 説明 |
|---|------|------|
| 1 | 地域サマリーカード | 総求職者数/女性比率/主要年齢層/平均資格数 |
| 2 | 資格別定着率カード | 資格ごとの地元定着傾向+凡例バッジ |
| 3 | 市区町村間フローTop10 | 都道府県間だけでなく市区町村間も表示 |

---

## 6. タブ4: 需給バランス - 差異（大幅欠落）

### 完全欠落機能
| # | 機能 | 説明 |
|---|------|------|
| 1 | 競争環境の言語化カード | 🔥/⚡/✨ icon + 競争倍率/求人数/戦略アドバイス |
| 2 | 選択地域表示 | 📍 選択中: 都道府県名 + 市区町村名 |
| 3 | KPIカード5枚 | 総需要/総供給/平均比率/不足地域/過剰地域 |
| 4 | 求人・求職者シェア比較カード | 求人シェア/求職者シェア/競争倍率 |
| 5 | 流入元×GAP分析テーブル | 流入元地域/流入数/GAP/示唆 |
| 6 | 需要超過ランキングTop10 | 横棒グラフ |
| 7 | 供給超過ランキングTop10 | 横棒グラフ |
| 8 | 需給比率ランキングTop10 | 横棒グラフ |
| 9 | 指標の説明パネル | 5項目の解説テキスト |

### Rust版に存在するがNiceGUI版にない機能
| 機能 | 説明 |
|------|------|
| 都道府県別求職者供給数(上位15) | 棒グラフ |
| 競争プロファイルテーブル | 都道府県別ランキング |

→ これらはNiceGUI版にない独自追加であり、完全再現の観点では削除対象

---

## 7. タブ5: 雇用形態分析 - 差異（大幅欠落）

### 存在するが差異がある機能
| 機能 | NiceGUI版 | Rust版 |
|------|----------|--------|
| 雇用形態分布 | ドーナツ(正職員/パート/その他) | ドーナツ(希望勤務形態) ❌ラベル違い |

### 完全欠落機能
| # | 機能 | 説明 |
|---|------|------|
| 1 | 雇用形態KPIカード | 各形態の人数と% |
| 2 | 雇用形態×年代 | stacked bar（20代〜70歳以上） |
| 3 | 雇用形態×性別 | grouped bar（男性/女性） |
| 4 | 雇用形態×就業状態 | stacked bar（就業中/離職中/在学中） |
| 5 | 雇用形態×移動パターン | ヒートマップ+棒グラフ+KPIサマリー |
| 6 | 統計的解釈の注意パネル | 効果量/有意性/精度/推奨の解説 |

### Rust版の独自機能（NiceGUI版にない）
| 機能 | 説明 |
|------|------|
| 転職緊急度×性別 | 2軸グラフ（棒+線） |

→ この機能はNiceGUI版タブ2に存在する。タブ5に配置されているのは誤り

---

## 8. タブ6: 求人地図 - 差異

| 要素 | NiceGUI版 | Rust版 |
|------|----------|--------|
| 実装方式 | GAS外部リンク | Leaflet内蔵マップ |
| 説明文 | Googleのセキュリティ制限... | なし |
| 職種セレクタ | あり | なし |
| 外部リンクボタン | 求人地図を開く | なし |
| 機能説明 | 4項目のリスト | なし |

→ NiceGUI版はGAS外部リンク。Rust版はLeaflet内蔵で実装方式が根本的に異なる。

---

## 9. タブ7: 人材地図 - 差異（大幅欠落）

### 完全欠落機能
| # | 機能 | 説明 |
|---|------|------|
| 1 | 属性フィルタ（雇用区分） | select: 全て/正職員/パート/その他 |
| 2 | 属性フィルタ（年代） | select: 全て/20代/30代/40代/50代以上 |
| 3 | 属性フィルタ（性別） | select: 全て/男性/女性 |
| 4 | 表示モード切替 | radio: 基本表示/流入元/流出入バランス/競合地域 |
| 5 | ポリゴン表示切替 | checkbox |
| 6 | マーカー表示切替 | checkbox |
| 7 | フロー表示切替 | checkbox |
| 8 | GeoJSONコロプレス地図 | 市区町村別色分け（4モード） |
| 9 | 市区町村クリック→詳細 | 右サイドバー（基本情報/フロー/年齢構成/雇用形態） |
| 10 | 4種類の凡例 | 表示モード別 |
| 11 | データ概要 | 市区町村数/データあり/最大値/総数 |

### Rust版の独自機能（NiceGUI版にない）
| 機能 | 説明 |
|------|------|
| 都道府県別求職者数 棒グラフ | 上位15 |
| 都道府県別ランキングテーブル | テーブル表示 |

→ NiceGUI版は高度な対話型地図。Rust版は棒グラフ+テーブルに簡略化されている

---

## 10. タブ8: 競合調査 - 差異

### 存在するが差異がある機能
| 機能 | NiceGUI版 | Rust版 |
|------|----------|--------|
| KPIカード | 該当件数 | 求人総数 + 施設数 | ❌ ラベル違い、施設数は独自 |
| 近辺検索ラベル | 近辺エリアも含める | 近辺検索 | ❌ テキスト違い |
| 市区町村未選択時注記 | ※市区町村を選択すると近辺検索が使えます | なし | ❌ 欠落 |

### 完全欠落機能
| # | 機能 | 説明 |
|---|------|------|
| 1 | 給与統計サマリーテーブル | 最頻値(1万円単位)/中央値/平均値 × 月給下限/上限 |
| 2 | 福利厚生カード | 賞与あり率/平均年間休日 |
| 3 | テーブル列: 給与区分 | 欠落 |
| 4 | テーブル列: 月給下限 | 欠落 |
| 5 | テーブル列: 月給上限 | 欠落 |
| 6 | テーブル列: 基本給 | 欠落 |
| 7 | テーブル列: 賞与 | 欠落 |
| 8 | テーブル列: 年間休日 | 欠落 |
| 9 | HTMLレポート列 | 同上（レポートにも欠落） |

---

## 11. 色の差異（全体）

| 要素 | NiceGUI版 | Rust版 |
|------|----------|--------|
| 男性 | #0072B2 | #0ea5e9 |
| 女性 | #E69F00 | #ec4899 |
| 成功/地元志向 | #009E73 | #10b981 |
| 警告 | #D55E00 | #f59e0b |
| アクセント | #F0E442 | - |
| 就業中 | #10b981 | - |
| 離職中 | #CC79A7 | - |
| 在学中 | #F0E442 | - |

---

## 12. 被害サマリー

| 項目 | 数値 |
|------|------|
| タブ名改変 | 5/8 |
| 完全欠落グラフ/チャート | ~18個 |
| 完全欠落KPIカード | ~18枚 |
| 完全欠落テーブル | ~5個 |
| 完全欠落フィルタ/コントロール | ~12個 |
| 完全欠落インタラクション | レアリティ検索、地図4モード切替、市区町村クリック詳細 |
| 色の不一致 | 主要6色 |
| ラベル/テキスト不一致 | ~30箇所 |

### タブ別被害度

| タブ | 被害度 | 説明 |
|------|--------|------|
| 1: 市場概況 | 🟡 中 | 3層比較が2層、診断詳細欠落、色違い |
| 2: 人材属性 | 🔴 大 | 8機能欠落（レアリティ検索含む） |
| 3: 地域・移動 | 🟡 中 | 3機能欠落、ラベル多数不一致 |
| 4: 需給バランス | 🔴 大 | 9機能ほぼ全欠落 |
| 5: 雇用形態分析 | 🔴 大 | 6機能欠落、独自機能誤配置 |
| 6: 求人地図 | 🟡 中 | 実装方式が根本的に異なる |
| 7: 人材地図 | 🔴 大 | 11機能欠落、地図→テーブルに簡略化 |
| 8: 競合調査 | 🟡 中 | 9列+2カード欠落 |
