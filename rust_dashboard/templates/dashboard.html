{% extends "base.html" %}

{% block title %}ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - æ±‚è·è€…ãƒ‡ãƒ¼ã‚¿åˆ†æ{% endblock %}

{% block body %}
<!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
<header class="bg-navy-800 border-b border-slate-700 px-6 py-3 flex items-center justify-between">
    <div class="flex items-center gap-4">
        <h1 class="text-lg font-bold text-white">job_ap_analyzer_gui</h1>
        <span class="text-slate-400 text-sm">ğŸ”§</span>
        <select id="job-type-select"
            hx-get="/api/set-job-type"
            hx-target="#content"
            hx-include="this"
            hx-trigger="change"
            hx-vals='js:{"job_type": document.getElementById("job-type-select").value}'
            class="bg-navy-700 border border-slate-600 rounded-lg px-3 py-1.5 text-sm text-white">
            {% for jt in job_types %}
            <option value="{{ jt }}" {% if jt == current_job_type %}selected{% endif %}>{{ jt }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="flex items-center gap-4">
        <span class="text-slate-400 text-sm">ãƒ­ã‚°ã‚¤ãƒ³: {{ user_email }}</span>
        <a href="/logout" class="text-slate-400 hover:text-white text-sm transition">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
    </div>
</header>

<!-- ã‚¿ãƒ–ãƒãƒ¼ -->
<nav class="bg-navy-800 border-b border-slate-700 px-6 flex gap-1 overflow-x-auto">
    <button class="tab-btn active" hx-get="/tab/overview" hx-target="#content" hx-swap="innerHTML"
        hx-on::after-request="setActiveTab(this)">
        ğŸ“Š å¸‚å ´æ¦‚æ³
    </button>
    <button class="tab-btn" hx-get="/tab/demographics" hx-target="#content" hx-swap="innerHTML"
        hx-on::after-request="setActiveTab(this)">
        ğŸ‘¥ äººæå±æ€§
    </button>
    <button class="tab-btn" hx-get="/tab/mobility" hx-target="#content" hx-swap="innerHTML"
        hx-on::after-request="setActiveTab(this)">
        ğŸ—ºï¸ åœ°åŸŸãƒ»ç§»å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³
    </button>
    <button class="tab-btn" hx-get="/tab/balance" hx-target="#content" hx-swap="innerHTML"
        hx-on::after-request="setActiveTab(this)">
        âš–ï¸ éœ€çµ¦ãƒãƒ©ãƒ³ã‚¹
    </button>
    <button class="tab-btn" hx-get="/tab/workstyle" hx-target="#content" hx-swap="innerHTML"
        hx-on::after-request="setActiveTab(this)">
        ğŸ“ˆ é›‡ç”¨å½¢æ…‹åˆ†æ
    </button>
    <button class="tab-btn" hx-get="/tab/jobmap" hx-target="#content" hx-swap="innerHTML"
        hx-on::after-request="setActiveTab(this)">
        ğŸ—ºï¸ æ±‚äººåœ°å›³
    </button>
    <button class="tab-btn" hx-get="/tab/talentmap" hx-target="#content" hx-swap="innerHTML"
        hx-on::after-request="setActiveTab(this)">
        ğŸ“ äººæåœ°å›³
    </button>
    <button class="tab-btn" hx-get="/tab/competitive" hx-target="#content" hx-swap="innerHTML"
        hx-on::after-request="setActiveTab(this)">
        ğŸ” ç«¶åˆèª¿æŸ»
    </button>
</nav>

<!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
<main id="content" class="p-6">
    <div class="text-center text-slate-400 py-20">
        <p class="text-lg">ã‚¿ãƒ–ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
    </div>
</main>

<script>
// åˆæœŸè¡¨ç¤º: å¸‚å ´æ¦‚æ³ã‚’è‡ªå‹•ãƒ­ãƒ¼ãƒ‰
document.addEventListener('DOMContentLoaded', function() {
    htmx.ajax('GET', '/tab/overview', {target: '#content', swap: 'innerHTML'});
    document.querySelector('.tab-btn').classList.add('active');
});

function setActiveTab(el) {
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    el.classList.add('active');
}
</script>
{% endblock %}
