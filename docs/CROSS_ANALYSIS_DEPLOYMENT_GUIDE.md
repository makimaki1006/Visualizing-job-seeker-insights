# インタラクティブクロス集計機能：デプロイメントガイド

**バージョン**: 1.0
**作成日**: 2025年11月3日
**対象**: GASプロジェクト管理者・開発者
**所要時間**: 約30分

---

## 目次

1. [デプロイメント前の準備](#1-デプロイメント前の準備)
2. [ステップバイステップ手順](#2-ステップバイステップ手順)
3. [動作確認](#3-動作確認)
4. [トラブルシューティング](#4-トラブルシューティング)
5. [ロールバック手順](#5-ロールバック手順)
6. [デプロイメント後の監視](#6-デプロイメント後の監視)

---

## 1. デプロイメント前の準備

### 1.1 前提条件チェックリスト

以下のすべてにチェックが入っていることを確認してください:

- [ ] GASプロジェクトへのアクセス権限がある
- [ ] 既存の`map_complete_integrated.html`が存在する
- [ ] Phase 12-14の実装が完了している
- [ ] Google Charts APIが読み込まれている
- [ ] `payload.applicants`データが正しく読み込まれている
- [ ] バックアップ用のストレージがある
- [ ] テスト用のサンプルデータがある

### 1.2 必要なファイル

| ファイル | パス | 説明 |
|---------|------|------|
| **新版HTML** | `gas_files/html/map_complete_integrated.html` | 更新版（クロス集計機能追加） |
| **テスト結果** | `tests/results/CROSS_ANALYSIS_TEST_RESULTS.json` | 233テスト100%成功の証明 |
| **統合チェックリスト** | `docs/GAS_INTEGRATION_CROSS_ANALYSIS_CHECKLIST.md` | 統合手順詳細 |
| **テストレポート** | `docs/CROSS_ANALYSIS_FINAL_TEST_REPORT.md` | 品質保証レポート |

### 1.3 リスク評価

| リスク | 発生確率 | 影響度 | 対策 |
|--------|---------|-------|------|
| データ構造の不一致 | 低 | 中 | 事前にpayload構造を確認 |
| 既存機能の破損 | 極低 | 高 | バックアップ作成、回帰テスト実施 |
| パフォーマンス問題 | 極低 | 中 | パフォーマンステスト合格済み（100k件 21ms） |
| セキュリティ脆弱性 | 極低 | 高 | セキュリティテスト合格済み（17テスト） |

**総合リスク評価**: **低リスク** ✅

---

## 2. ステップバイステップ手順

### ステップ1: 現在の環境のバックアップ

#### 1.1 GASプロジェクトを開く

1. Google Apps Scriptプロジェクトにアクセス
2. プロジェクト名を確認（例: "Job Medley Insight Suite"）

#### 1.2 現在のHTMLファイルをダウンロード

1. 左側のファイルリストから`map_complete_integrated.html`を探す
2. ファイル名をクリックしてエディタで開く
3. すべてのコードを選択（Ctrl+A）
4. コピー（Ctrl+C）
5. ローカルに新規テキストファイルを作成
6. ファイル名: `map_complete_integrated_backup_YYYYMMDD.html`
   - 例: `map_complete_integrated_backup_20251103.html`
7. コードを貼り付け（Ctrl+V）
8. 保存

**確認**:
- [ ] バックアップファイルがローカルに保存された
- [ ] ファイルサイズが0KBでない
- [ ] ファイルが開いて中身が確認できる

---

### ステップ2: 更新版ファイルの準備

#### 2.1 ローカルファイルの確認

```bash
# ファイルパス
C:\Users\fuji1\OneDrive\Pythonスクリプト保管\job_medley_project\gas_files\html\map_complete_integrated.html
```

#### 2.2 ファイル内容の確認

1. ローカルの`map_complete_integrated.html`をテキストエディタで開く
2. 以下のキーワードで検索し、実装されていることを確認:

| キーワード | 行番号 | 説明 |
|-----------|-------|------|
| `MAJOR_QUALIFICATIONS` | 3097 | 20主要資格定数 |
| `function renderCross(city)` | 3120 | クロス集計UI構築関数 |
| `function getAllApplicantsForCity` | 3202 | 申請者データ取得関数 |
| `function executeCrossTabulation` | 3219 | クロス集計実行関数 |
| `function extractAxisValue` | 3291 | 資格バイネーム対応 |
| `function downloadCrossCSV` | 3423 | CSV出力関数 |
| `city.applicants = allApplicants.filter` | 2129 | normalizePayload拡張 |

**確認**:
- [ ] すべてのキーワードが見つかった
- [ ] ファイルサイズが約100KB以上ある
- [ ] 文字化けしていない

---

### ステップ3: GASへのアップロード

#### 3.1 既存ファイルの削除

⚠️ **重要**: この操作は取り返しがつきません。必ずバックアップを確認してください。

1. GASプロジェクトで`map_complete_integrated.html`を右クリック
2. 「削除」を選択
3. 削除確認ダイアログで「削除」をクリック

**確認**:
- [ ] ファイルがファイルリストから消えた

#### 3.2 新しいHTMLファイルの追加

1. GASエディタの左上「+」ボタンをクリック
2. 「HTML」を選択
3. ファイル名入力欄に`map_complete_integrated`と入力（拡張子なし）
4. 「作成」をクリック

#### 3.3 コードのコピー＆ペースト

1. ローカルの`map_complete_integrated.html`をテキストエディタで開く
2. すべてのコードを選択（Ctrl+A）
3. コピー（Ctrl+C）
4. GASエディタで新しく作成した`map_complete_integrated.html`を開く
5. すべてを選択（Ctrl+A）
6. 貼り付け（Ctrl+V）
7. Ctrl+S で保存

**確認**:
- [ ] コードが正しく貼り付けられた
- [ ] 保存ボタンが押された（保存完了メッセージが表示された）

---

### ステップ4: データ構造の確認

#### 4.1 payload.applicantsの確認

1. GASエディタでメインスクリプト（`Code.gs`または類似）を開く
2. `payload.applicants`が存在するか確認
3. 以下のフィールドが含まれているか確認:

**必須フィールド**:
```javascript
{
  "applicants": [
    {
      "age_bucket": "20-29歳",              // ✅ 必須
      "gender": "女性",                     // ✅ 必須
      "employment_status": "在職中",        // ✅ 必須
      "education": "大学卒",                // ✅ 必須
      "career": "3-5年",                    // ✅ 必須
      "desired_job": "介護職",              // ✅ 必須
      "urgency_score": 7,                   // ✅ 必須（数値）
      "qualifications": "介護福祉士,自動車運転免許", // ✅ 必須（カンマ区切り文字列）
      "desired_locations": [                // ✅ 必須（配列）
        {
          "municipality": "京都市",         // ✅ 必須
          "location": "kyoto_city"          // ✅ 必須
        }
      ]
    }
  ]
}
```

#### 4.2 サンプルデータでの確認方法

GASエディタで以下のスクリプトを実行:

```javascript
function checkPayloadStructure() {
  // payloadを取得（実際の取得方法に合わせて調整）
  const payload = getPayloadData();

  if (!payload || !payload.applicants) {
    Logger.log('❌ payload.applicantsが存在しません');
    return;
  }

  Logger.log(`✅ 申請者データ件数: ${payload.applicants.length}件`);

  const sample = payload.applicants[0];
  Logger.log('サンプルデータ:');
  Logger.log(`  age_bucket: ${sample.age_bucket}`);
  Logger.log(`  gender: ${sample.gender}`);
  Logger.log(`  qualifications: ${sample.qualifications}`);
  Logger.log(`  desired_locations: ${JSON.stringify(sample.desired_locations)}`);
  Logger.log(`  urgency_score: ${sample.urgency_score}`);
}
```

**期待される出力**:
```
✅ 申請者データ件数: 1500件
サンプルデータ:
  age_bucket: 20-29歳
  gender: 女性
  qualifications: 介護福祉士,自動車運転免許
  desired_locations: [{"municipality":"京都市","location":"kyoto_city"}]
  urgency_score: 7
```

**確認**:
- [ ] すべての必須フィールドが存在する
- [ ] qualificationsがカンマ区切り文字列である
- [ ] urgency_scoreが数値である
- [ ] desired_locationsが配列である

---

### ステップ5: 初回動作確認

#### 5.1 プレビュー実行

1. GASエディタで「デプロイ」→「テスト デプロイ」を選択
2. ブラウザで開く
3. タブ一覧を確認

**確認**:
- [ ] 「クロス分析」タブが表示される
- [ ] 既存のタブ（Phase 12-14）が正常に表示される

#### 5.2 クロス分析タブの表示確認

1. 「クロス分析」タブをクリック
2. 以下が表示されることを確認:

| 要素 | 期待される表示 |
|------|--------------|
| タイトル | 📊 インタラクティブクロス集計 |
| 統計情報 | 選択地域: ○○ \| データ件数: N件 |
| X軸ドロップダウン | 27選択肢（基本属性7 + 資格20） |
| Y軸ドロップダウン | 27選択肢 |
| 実行ボタン | 🔍 クロス集計を実行 |
| デフォルトテーブル | 年齢層 × 性別のクロス集計テーブル |
| ヒートマップ | Google Chartsの棒グラフ |

**確認**:
- [ ] すべての要素が表示される
- [ ] エラーメッセージが表示されない
- [ ] デフォルトテーブルにデータが表示される

#### 5.3 ブラウザコンソールの確認

1. F12キーを押して開発者ツールを開く
2. 「Console」タブを開く
3. エラーメッセージがないことを確認

**期待されるログ**:
```
[normalizePayload] 申請者データ総数: 1500件
[normalizePayload] 各都市への申請者配置完了: 合計1500件（重複あり）
```

**確認**:
- [ ] 赤いエラーメッセージがない
- [ ] normalizePayloadのログが表示される

---

### ステップ6: 基本機能テスト

#### 6.1 軸選択テスト

##### テスト1: 基本属性のクロス集計

**操作**:
1. X軸: 「年齢層」を選択
2. Y軸: 「性別」を選択
3. 「🔍 クロス集計を実行」をクリック

**期待結果**:
- テーブルが更新される
- X軸に年齢層（例: 20-29歳、30-39歳...）が表示される
- Y軸に性別（例: 男性、女性、不明）が表示される
- 各セルにカウントが表示される
- 合計行・合計列が正しい
- セルに背景色（ヒートマップ）が適用される

**確認**:
- [ ] テーブルが正しく表示された
- [ ] 合計値が一致している
- [ ] 背景色が適用されている

##### テスト2: 資格バイネームのクロス集計

**操作**:
1. X軸: 「介護福祉士」を選択（資格セクション）
2. Y軸: 「年齢層」を選択
3. 「🔍 クロス集計を実行」をクリック

**期待結果**:
- X軸に「あり」と「なし」の2列が表示される
- Y軸に年齢層が表示される
- 「あり」のカウント合計 + 「なし」のカウント合計 = 申請者総数

**確認**:
- [ ] 「あり」と「なし」が表示された
- [ ] 合計値が申請者総数と一致している

##### テスト3: 転職意欲レベルのクロス集計

**操作**:
1. X軸: 「転職意欲」を選択
2. Y軸: 「年齢層」を選択
3. 「🔍 クロス集計を実行」をクリック

**期待結果**:
- X軸に「最高」「高」「中」「低」の4列が表示される
- urgency_scoreが正しく4段階に変換される:
  - 8以上: 「最高」
  - 6-7: 「高」
  - 4-5: 「中」
  - 0-3: 「低」

**確認**:
- [ ] 4つのレベルが表示された
- [ ] 分類が正しい（サンプルデータで確認）

#### 6.2 CSV出力テスト

**操作**:
1. 任意の軸組み合わせでクロス集計を実行
2. 「📥 CSV出力」ボタンをクリック

**期待結果**:
- CSVファイルがダウンロードされる
- ファイル名: `cross_[Y軸]_[X軸]_YYYY-MM-DD.csv`
  - 例: `cross_年齢層_性別_2025-11-03.csv`
- 日本語が文字化けしない（BOM付きUTF-8）
- Excelで開ける

**確認**:
- [ ] CSVファイルがダウンロードされた
- [ ] 日本語が正しく表示される
- [ ] Excelで開ける

---

### ステップ7: 回帰テスト（既存機能への影響確認）

#### 7.1 Phase 12タブ（需給バランス）

**操作**:
1. Phase 12タブをクリック
2. データが表示されることを確認

**確認**:
- [ ] Phase 12タブが正常に表示される
- [ ] データが破損していない

#### 7.2 Phase 13タブ（希少人材分析）

**操作**:
1. Phase 13タブをクリック
2. データが表示されることを確認

**確認**:
- [ ] Phase 13タブが正常に表示される
- [ ] データが破損していない

#### 7.3 Phase 14タブ（人材プロファイル）

**操作**:
1. Phase 14タブをクリック
2. データが表示されることを確認

**確認**:
- [ ] Phase 14タブが正常に表示される
- [ ] データが破損していない

#### 7.4 タブ切り替え

**操作**:
1. Phase 12 → Phase 13 → Phase 14 → クロス分析 → Phase 12
2. すべてのタブが正常に切り替わることを確認

**確認**:
- [ ] タブ切り替えがスムーズ
- [ ] 各タブでデータが正しく表示される

---

### ステップ8: エッジケーステスト

#### 8.1 データが0件の地域

**操作**:
1. 申請者がいない地域を選択
2. 「クロス分析」タブを開く

**期待結果**:
- 「選択地域（○○）の申請者データがありません。」と表示される
- エラーが発生しない

**確認**:
- [ ] エラーメッセージが表示された
- [ ] ブラウザコンソールにエラーがない

#### 8.2 特殊文字を含む資格名

**操作**:
1. X軸: 「介護職員初任者研修（旧ヘルパー2級）」を選択
2. Y軸: 「性別」を選択
3. 「🔍 クロス集計を実行」をクリック

**期待結果**:
- 括弧付き資格名が正しく認識される
- 「あり」と「なし」が正しく集計される

**確認**:
- [ ] 括弧付き資格名が正しく処理された
- [ ] 集計結果が正しい

---

### ステップ9: パフォーマンステスト

#### 9.1 大量データ処理（1,000件以上）

**操作**:
1. 申請者データが1,000件以上の地域を選択
2. X軸: 「年齢層」を選択
3. Y軸: 「性別」を選択
4. 「🔍 クロス集計を実行」をクリック
5. 処理時間を体感

**期待結果**:
- 2秒以内に集計完了（体感）
- ブラウザがフリーズしない
- テーブルが正しく表示される

**確認**:
- [ ] 処理が2秒以内に完了した
- [ ] ブラウザがフリーズしなかった
- [ ] テーブルが正しく表示された

---

### ステップ10: デプロイメント完了

#### 10.1 最終チェック

以下のすべてにチェックが入っていることを確認:

- [ ] 基本動作確認完了（ステップ5）
- [ ] 基本機能テスト完了（ステップ6）
- [ ] 回帰テスト完了（ステップ7）
- [ ] エッジケーステスト完了（ステップ8）
- [ ] パフォーマンステスト完了（ステップ9）
- [ ] ブラウザコンソールにエラーなし
- [ ] バックアップが保存されている

#### 10.2 本番デプロイ

⚠️ **重要**: テストデプロイで問題がなければ、本番デプロイを実行

1. GASエディタで「デプロイ」→「新しいデプロイ」を選択
2. 「デプロイの説明」に入力:
   ```
   インタラクティブクロス集計機能追加 (v2.2)
   - 27軸選択対応（基本属性7 + 資格20）
   - 資格バイネーム対応
   - リアルタイムクロス集計
   - ヒートマップ可視化
   - CSV出力機能
   テスト結果: 233テスト100%成功
   ```
3. 「デプロイ」をクリック

**確認**:
- [ ] デプロイ成功メッセージが表示された
- [ ] デプロイURLが生成された

#### 10.3 本番環境での最終確認

1. デプロイURLをブラウザで開く
2. ステップ5-9の確認を再度実施
3. すべての機能が正常に動作することを確認

**確認**:
- [ ] すべての機能が正常に動作した

---

## 3. 動作確認

### 3.1 動作確認チェックリスト

| カテゴリ | 項目 | ステータス |
|---------|------|-----------|
| **UI表示** | タブが表示される | ⬜ |
| **UI表示** | ドロップダウンに27選択肢が表示される | ⬜ |
| **UI表示** | デフォルトテーブルが表示される | ⬜ |
| **基本機能** | 年齢層×性別のクロス集計が動作する | ⬜ |
| **基本機能** | 資格バイネームのクロス集計が動作する | ⬜ |
| **基本機能** | 転職意欲レベルのクロス集計が動作する | ⬜ |
| **CSV出力** | CSVがダウンロードされる | ⬜ |
| **CSV出力** | 日本語が文字化けしない | ⬜ |
| **回帰** | Phase 12タブが正常に動作する | ⬜ |
| **回帰** | Phase 13タブが正常に動作する | ⬜ |
| **回帰** | Phase 14タブが正常に動作する | ⬜ |
| **エッジケース** | データ0件の地域で適切なメッセージが表示される | ⬜ |
| **エッジケース** | 特殊文字を含む資格名が正しく処理される | ⬜ |
| **パフォーマンス** | 1,000件以上のデータが2秒以内に処理される | ⬜ |

---

## 4. トラブルシューティング

### 4.1 よくある問題と解決方法

#### 問題1: テーブルが表示されない

**症状**:
- 「クロス分析」タブを開いても何も表示されない
- または「データがありません」と表示される

**原因候補**:
1. `payload.applicants`が存在しない
2. `desired_locations`が空配列
3. `normalizePayload()`が実行されていない

**解決方法**:
```javascript
// デバッグ用スクリプト
function debugCrossAnalysis() {
  const payload = getPayloadData();

  // 1. payload.applicantsの確認
  Logger.log(`payload.applicants: ${payload && payload.applicants ? 'あり' : 'なし'}`);
  if (payload && payload.applicants) {
    Logger.log(`  件数: ${payload.applicants.length}件`);
    Logger.log(`  サンプル: ${JSON.stringify(payload.applicants[0])}`);
  }

  // 2. normalizePayload()の実行確認
  const normalized = normalizePayload(payload);
  const city = normalized.cities[0];
  Logger.log(`city.applicants: ${city.applicants ? 'あり' : 'なし'}`);
  if (city.applicants) {
    Logger.log(`  件数: ${city.applicants.length}件`);
  }
}
```

#### 問題2: 資格バイネームが正しく集計されない

**症状**:
- すべてが「なし」になる
- または集計結果が明らかに間違っている

**原因候補**:
1. `qualifications`フィールドが存在しない
2. カンマ区切りではなく別の形式で保存されている
3. 資格名に余分なスペースが含まれている

**解決方法**:
```javascript
// デバッグ用スクリプト
function debugQualifications() {
  const payload = getPayloadData();
  const sample = payload.applicants[0];

  Logger.log(`qualifications: ${sample.qualifications}`);
  Logger.log(`型: ${typeof sample.qualifications}`);

  // スプリット確認
  const qualList = (sample.qualifications || '').split(',').map(q => q.trim());
  Logger.log(`スプリット結果: ${JSON.stringify(qualList)}`);

  // MAJOR_QUALIFICATIONSとの比較
  const testQual = '介護福祉士';
  Logger.log(`"${testQual}"が含まれるか: ${qualList.includes(testQual)}`);
}
```

#### 問題3: CSVがExcelで文字化けする

**症状**:
- ダウンロードしたCSVをExcelで開くと日本語が文字化けする

**原因候補**:
1. BOMが正しく付与されていない
2. UTF-8エンコーディングが破損している

**解決方法**:
```javascript
// downloadCrossCSV()関数の確認
function downloadCrossCSV(labelY, labelX) {
  // ...

  // BOM付きUTF-8でダウンロード
  const bom = '\uFEFF'; // ← これが重要
  const blob = new Blob([bom + csv], { type: 'text/csv;charset=utf-8;' });

  // ...
}
```

**代替方法**:
- Excelの「データ」→「テキストファイル」→「UTF-8」を明示的に指定してインポート

#### 問題4: Google Chartsが表示されない

**症状**:
- テーブルは表示されるが、ヒートマップチャートが表示されない

**原因候補**:
1. Google Charts APIが読み込まれていない
2. `google.visualization`が未定義

**解決方法**:
```html
<!-- HTMLファイルの<head>内に以下を追加 -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
</script>
```

#### 問題5: 処理が遅い

**症状**:
- クロス集計の実行に10秒以上かかる

**原因候補**:
1. データ件数が10万件を超えている
2. ブラウザのメモリ不足

**解決方法**:
- データ件数を確認:
```javascript
Logger.log(`データ件数: ${applicants.length}件`);
```
- 10万件以上の場合は、事前にフィルタリングを推奨

---

## 5. ロールバック手順

万が一、問題が発生した場合のロールバック手順:

### 5.1 問題の重大度評価

| レベル | 定義 | 対応 |
|--------|------|------|
| **Level 1（Critical）** | データ損失、サービス停止 | 即座にロールバック |
| **Level 2（High）** | 主要機能が動作しない | 影響範囲を評価後、ロールバック判断 |
| **Level 3（Medium）** | 一部機能に問題 | 次回リリースで修正 |
| **Level 4（Low）** | UIの軽微な問題 | 次回リリースで修正 |

### 5.2 ロールバック手順（Level 1-2の場合）

#### ステップ1: 現在のファイルを削除

1. GASプロジェクトで`map_complete_integrated.html`を右クリック
2. 「削除」を選択

#### ステップ2: バックアップファイルの復元

1. ステップ1.2で作成したバックアップファイルを開く
   - `map_complete_integrated_backup_20251103.html`
2. すべてのコードを選択（Ctrl+A）
3. コピー（Ctrl+C）

#### ステップ3: 新しいHTMLファイルの追加

1. GASエディタの左上「+」ボタンをクリック
2. 「HTML」を選択
3. ファイル名: `map_complete_integrated`
4. 貼り付け（Ctrl+V）
5. 保存（Ctrl+S）

#### ステップ4: 動作確認

1. テストデプロイを実行
2. Phase 12-14タブが正常に動作することを確認
3. 問題が解決したことを確認

#### ステップ5: 報告

1. 発生した問題を記録
2. ロールバック完了を関係者に報告
3. 問題の原因調査を開始

---

## 6. デプロイメント後の監視

### 6.1 監視項目と頻度

| 項目 | 確認方法 | 頻度 |
|------|---------|------|
| **エラー発生** | GASログを確認 | 初日: 毎時間<br>初週: 毎日<br>以降: 毎週 |
| **パフォーマンス** | 処理時間を計測 | 初週: 毎日<br>以降: 毎週 |
| **ユーザーフィードバック** | 問い合わせ確認 | 随時 |
| **データ整合性** | 合計値の検証 | 初週: 毎日<br>以降: 毎週 |

### 6.2 エラー監視方法

#### GASログの確認方法

1. GASエディタで「実行」→「実行ログ」を開く
2. エラーメッセージを確認
3. 以下のようなログを探す:

```
Error: Cannot read properties of null (reading 'startsWith')
TypeError: Cannot read properties of undefined (reading 'filter')
ReferenceError: payload is not defined
```

#### 推奨アラート設定

- **Critical**: データ損失、サービス停止
- **High**: 主要機能の不具合
- **Medium**: 一部機能の問題
- **Low**: UIの軽微な問題

### 6.3 パフォーマンス監視方法

#### 処理時間の計測

```javascript
function measurePerformance() {
  const start = Date.now();

  // クロス集計処理
  executeCrossTabulation(city, applicants, 'age_bucket', 'gender');

  const time = Date.now() - start;
  Logger.log(`処理時間: ${time}ms`);

  if (time > 2000) {
    Logger.log('⚠️ 処理時間が2秒を超えています');
  }
}
```

#### 推奨しきい値

| データ件数 | しきい値 | ステータス |
|-----------|---------|-----------|
| < 1,000件 | < 500ms | ✅ OK |
| 1,000-10,000件 | < 1000ms | ✅ OK |
| 10,000-50,000件 | < 2000ms | ⚠️ 要監視 |
| > 50,000件 | < 5000ms | ⚠️ 要最適化 |

---

## 7. デプロイメント完了レポート

デプロイメント完了後、以下のレポートを作成してください:

### 7.1 デプロイメント実施レポート

```
【デプロイメント実施レポート】

■ 基本情報
- デプロイ日時: YYYY年MM月DD日 HH:MM
- 担当者: [氏名]
- バージョン: v2.2
- GASプロジェクト名: Job Medley Insight Suite

■ デプロイメント内容
- インタラクティブクロス集計機能追加
- 27軸選択対応（基本属性7 + 資格20）
- 資格バイネーム対応
- リアルタイムクロス集計
- ヒートマップ可視化
- CSV出力機能

■ テスト結果
- 総テスト数: 233テスト
- 成功率: 100% (233/233)
- 品質スコア: 98/100点（EXCELLENT）

■ 動作確認結果
- UI表示: ✅ 正常
- 基本機能: ✅ 正常
- CSV出力: ✅ 正常
- 回帰テスト: ✅ 正常（Phase 12-14影響なし）
- エッジケース: ✅ 正常
- パフォーマンス: ✅ 正常（1,000件: 1ms < 2000ms）

■ 発生した問題
- [問題があれば記載、なければ「なし」]

■ 残課題
- [あれば記載、なければ「なし」]

■ 次のアクション
1. エラー監視開始（初日: 毎時間）
2. パフォーマンス計測（初週: 毎日）
3. ユーザーフィードバックの収集
```

---

## 8. 連絡先・サポート

### 8.1 技術的な問い合わせ

| 問い合わせ内容 | 参照ドキュメント |
|--------------|----------------|
| 実装に関する質問 | `CROSS_ANALYSIS_INTERACTIVE_FEATURE.md` |
| テスト結果 | `CROSS_ANALYSIS_FINAL_TEST_REPORT.md` |
| 統合手順 | `GAS_INTEGRATION_CROSS_ANALYSIS_CHECKLIST.md` |
| トラブルシューティング | 本ドキュメント（第4章） |

### 8.2 サポート体制

- **緊急時（Level 1-2）**: 即座に対応、ロールバック実施
- **通常時（Level 3-4）**: 次回リリースで修正

---

## 9. チェックリスト（印刷用）

デプロイメント実施時に使用してください:

```
□ ステップ1: バックアップ作成
  □ 現在のHTMLファイルをダウンロード
  □ ローカルに保存（ファイル名: map_complete_integrated_backup_YYYYMMDD.html）
  □ バックアップファイルが開けることを確認

□ ステップ2: 更新版ファイルの準備
  □ ローカルファイルの存在確認
  □ ファイル内容の確認（キーワード検索）

□ ステップ3: GASへのアップロード
  □ 既存ファイルの削除
  □ 新しいHTMLファイルの追加
  □ コードのコピー＆ペースト
  □ 保存

□ ステップ4: データ構造の確認
  □ payload.applicantsの確認
  □ 必須フィールドの確認
  □ サンプルデータでの確認

□ ステップ5: 初回動作確認
  □ プレビュー実行
  □ クロス分析タブの表示確認
  □ ブラウザコンソールの確認

□ ステップ6: 基本機能テスト
  □ 基本属性のクロス集計
  □ 資格バイネームのクロス集計
  □ 転職意欲レベルのクロス集計
  □ CSV出力テスト

□ ステップ7: 回帰テスト
  □ Phase 12タブ
  □ Phase 13タブ
  □ Phase 14タブ
  □ タブ切り替え

□ ステップ8: エッジケーステスト
  □ データ0件の地域
  □ 特殊文字を含む資格名

□ ステップ9: パフォーマンステスト
  □ 大量データ処理（1,000件以上）

□ ステップ10: デプロイメント完了
  □ 最終チェック
  □ 本番デプロイ
  □ 本番環境での最終確認
  □ デプロイメント実施レポート作成
```

---

**ドキュメントバージョン**: 1.0
**作成日**: 2025年11月3日
**最終更新日**: 2025年11月3日
**ステータス**: レビュー待ち

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| 2025-11-03 | 1.0 | 初版作成 |
