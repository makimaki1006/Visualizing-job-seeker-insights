# ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ­ã‚¹é›†è¨ˆæ©Ÿèƒ½ï¼ˆè³‡æ ¼ãƒã‚¤ãƒãƒ¼ãƒ å¯¾å¿œï¼‰

**æ—¥ä»˜**: 2025å¹´11æœˆ3æ—¥
**å¤‰æ›´ç†ç”±**: ã‚¯ãƒ­ã‚¹åˆ†æžã‚¿ãƒ–ã‚’ã€Œã‚‚ã£ã¨ä½¿ã„ã‚„ã™ãã€ã‹ã¤ã€ã‚‚ã£ã¨ç´°ã‹ãã€ã™ã‚‹ãŸã‚
**å½±éŸ¿ç¯„å›²**: ã‚¯ãƒ­ã‚¹åˆ†æžã‚¿ãƒ–ã®ã¿ï¼ˆä»–ã®ã‚¿ãƒ–ã¯å½±éŸ¿ãªã—ï¼‰

---

## å¤‰æ›´æ¦‚è¦

### å¤‰æ›´å‰ï¼ˆå›ºå®šãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºï¼‰
- 13ç¨®é¡žã®å›ºå®šãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»ãƒžãƒˆãƒªãƒƒã‚¯ã‚¹ã‚’å…¨ã¦è¡¨ç¤º
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¤‰æ›´ä¸å¯
- æƒ…å ±éŽå¤šã§è¦‹ã¥ã‚‰ã„
- è³‡æ ¼ã¯ã€Œå€‹æ•°ã€ã®ã¿ï¼ˆä½•å€‹æŒã£ã¦ã„ã‚‹ã‹ï¼‰

### å¤‰æ›´å¾Œï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ­ã‚¹é›†è¨ˆï¼‰
- **Xè»¸ãƒ»Yè»¸ã‚’è‡ªç”±ã«é¸æŠž**
- **è³‡æ ¼ã¯ãƒã‚¤ãƒãƒ¼ãƒ å¯¾å¿œ**ï¼ˆã€Œä»‹è­·ç¦ç¥‰å£«ã‚’æŒã£ã¦ã„ã‚‹/æŒã£ã¦ã„ãªã„ã€ï¼‰
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¯ãƒ­ã‚¹é›†è¨ˆ**
- **ãƒ’ãƒ¼ãƒˆãƒžãƒƒãƒ—å¯è¦–åŒ–**
- **CSVå‡ºåŠ›æ©Ÿèƒ½**

---

## å®Ÿè£…è©³ç´°

### 1. é¸æŠžå¯èƒ½ãªè»¸

#### åŸºæœ¬å±žæ€§ï¼ˆ7ç¨®é¡žï¼‰
| è»¸ | å€¤ | ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ |
|----|-----|-------------|
| å¹´é½¢å±¤ | 20ä»£æœªæº€/20ä»£/30ä»£/40ä»£/50ä»£/60ä»£ä»¥ä¸Š | age_bucket |
| æ€§åˆ¥ | ç”·æ€§/å¥³æ€§ | gender |
| å°±æ¥­çŠ¶æ…‹ | å°±æ¥­ä¸­/é›¢è·ä¸­/æ–°å’ãƒ»æœªå°±æ¥­ | employment_status |
| å­¦æ­´ | ä¸­å­¦å’æ¥­/é«˜æ ¡å’æ¥­/å°‚é–€å­¦æ ¡å’æ¥­/... | education |
| ã‚­ãƒ£ãƒªã‚¢ | ä»‹è­·ãƒ»ç¦ç¥‰é–¢é€£/åŒ»ç™‚é–¢é€£/ãã®ä»– | career |
| å¸Œæœ›è·ç¨® | ãƒ›ãƒ¼ãƒ ãƒ˜ãƒ«ãƒ‘ãƒ¼/ä»‹è­·è·å“¡/çœ‹è­·å¸«/... | desired_job |
| è»¢è·æ„æ¬² | ä½Ž/ä¸­/é«˜/æœ€é«˜ | urgency_scoreï¼ˆè‡ªå‹•å¤‰æ›ï¼‰ |

#### è³‡æ ¼ï¼ˆãƒã‚¤ãƒãƒ¼ãƒ ã€20ç¨®é¡žï¼‰
| è³‡æ ¼å | é »åº¦ |
|--------|------|
| è‡ªå‹•è»Šé‹è»¢å…è¨± | 39.5% |
| ä»‹è­·ç¦ç¥‰å£« | 29.1% |
| ä»‹è­·è·å“¡åˆä»»è€…ç ”ä¿®ï¼ˆæ—§ãƒ˜ãƒ«ãƒ‘ãƒ¼2ç´šï¼‰ | 28.5% |
| ä»‹è­·è·å“¡å®Ÿå‹™è€…ç ”ä¿®ï¼ˆæ—§ãƒ˜ãƒ«ãƒ‘ãƒ¼1ç´š/åŸºç¤Žç ”ä¿®ï¼‰ | 13.7% |
| ç¤¾ä¼šç¦ç¥‰ä¸»äº‹ä»»ç”¨è³‡æ ¼ | 3.4% |
| ç¦ç¥‰ç”¨å…·å°‚é–€ç›¸è«‡å“¡ | 2.9% |
| ç¤¾ä¼šç¦ç¥‰å£« | 1.4% |
| çœ‹è­·å¸« | 1.2% |
| ä¿è‚²å£« | 1.2% |
| å‡†çœ‹è­·å¸« | 1.0% |
| ä»‹è­·æ”¯æ´å°‚é–€å“¡ï¼ˆã‚±ã‚¢ãƒžãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼‰ | - |
| è¨ªå•ä»‹è­·å“¡1ç´š | - |
| è¨ªå•ä»‹è­·å“¡2ç´š | - |
| ç²¾ç¥žä¿å¥ç¦ç¥‰å£« | - |
| ç†å­¦ç™‚æ³•å£« | - |
| æ „é¤Šå£« | - |
| ä½œæ¥­ç™‚æ³•å£« | - |
| ç®¡ç†æ „é¤Šå£« | - |
| è¨€èªžè´è¦šå£« | - |
| æ­¯ç§‘è¡›ç”Ÿå£« | - |

**è³‡æ ¼ã®æ‰±ã„**:
- `qualifications`ã‚«ãƒ©ãƒ ã®ã‚«ãƒ³ãƒžåŒºåˆ‡ã‚Šæ–‡å­—åˆ—ã‚’ãƒ‘ãƒ¼ã‚¹
- ç‰¹å®šã®è³‡æ ¼ã‚’æŒã£ã¦ã„ã‚‹ã‹åˆ¤å®š â†’ ã€Œã‚ã‚Š/ãªã—ã€ã§é›†è¨ˆ

---

### 2. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```
ðŸ“Š ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ­ã‚¹é›†è¨ˆ
é¸æŠžåœ°åŸŸ: äº¬éƒ½åºœäº¬éƒ½å¸‚ä¼è¦‹åŒº | ãƒ‡ãƒ¼ã‚¿ä»¶æ•°: 1,748ä»¶

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Xè»¸ï¼ˆæ¨ªè»¸ï¼‰é¸æŠž   â”‚  Yè»¸ï¼ˆç¸¦è»¸ï¼‰é¸æŠž    â”‚
â”‚ [å¹´é½¢å±¤ â–¼]       â”‚  [æ€§åˆ¥ â–¼]          â”‚
â”‚                  â”‚                    â”‚
â”‚ ðŸ” ã‚¯ãƒ­ã‚¹é›†è¨ˆã‚’å®Ÿè¡Œ                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---
æ€§åˆ¥ Ã— å¹´é½¢å±¤
ðŸ“¥ CSVå‡ºåŠ›

[ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆãƒ’ãƒ¼ãƒˆãƒžãƒƒãƒ—è¡¨ç¤ºï¼‰]
æ€§åˆ¥ \ å¹´é½¢å±¤ | 20ä»£ | 30ä»£ | 40ä»£ | 50ä»£ | åˆè¨ˆ
ç”·æ€§         | 120  | 200  | 150  | 158  | 628
å¥³æ€§         | 300  | 350  | 250  | 220  | 1120
åˆè¨ˆ         | 420  | 550  | 400  | 378  | 1748

[Google Chartsãƒ’ãƒ¼ãƒˆãƒžãƒƒãƒ—]
```

---

### 3. ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´å†…å®¹

#### (1) `map_complete_integrated.html` - renderCross()å®Œå…¨æ›¸ãæ›ãˆ

**å¤‰æ›´å‰**: 3079-3172è¡Œï¼ˆ94è¡Œï¼‰
**å¤‰æ›´å¾Œ**: 3079-3447è¡Œï¼ˆ369è¡Œï¼‰

**è¿½åŠ é–¢æ•°**:
1. `renderCross(city)` - ãƒ¡ã‚¤ãƒ³é–¢æ•°ï¼ˆUIæ§‹ç¯‰ï¼‰
2. `getAllApplicantsForCity(city)` - é¸æŠžåœ°åŸŸã®ç”³è«‹è€…å–å¾—
3. `executeCrossTabulation(city, applicants, axisX, axisY)` - ã‚¯ãƒ­ã‚¹é›†è¨ˆå®Ÿè¡Œ
4. `getAxisLabel(axis)` - è»¸ãƒ©ãƒ™ãƒ«å–å¾—
5. `extractAxisValue(applicant, axis)` - è»¸ã®å€¤æŠ½å‡º
6. `buildCrossMatrix(data)` - ã‚¯ãƒ­ã‚¹é›†è¨ˆãƒžãƒˆãƒªãƒƒã‚¯ã‚¹æ§‹ç¯‰
7. `buildCrossTable(crossMatrix, labelY, labelX)` - ãƒ†ãƒ¼ãƒ–ãƒ«HTMLç”Ÿæˆ
8. `renderCrossHeatmap(crossMatrix, labelY, labelX)` - Google Chartsãƒ’ãƒ¼ãƒˆãƒžãƒƒãƒ—æç”»
9. `downloadCrossCSV(labelY, labelX)` - CSVå‡ºåŠ›

**ä¸»è¦è³‡æ ¼å®šæ•°**:
```javascript
const MAJOR_QUALIFICATIONS = [
  'è‡ªå‹•è»Šé‹è»¢å…è¨±',
  'ä»‹è­·ç¦ç¥‰å£«',
  'ä»‹è­·è·å“¡åˆä»»è€…ç ”ä¿®ï¼ˆæ—§ãƒ˜ãƒ«ãƒ‘ãƒ¼2ç´šï¼‰',
  // ... å…¨20ç¨®é¡ž
];
```

#### (2) `map_complete_integrated.html` - normalizePayload()æ‹¡å¼µ

**è¿½åŠ ç®‡æ‰€**: 2122-2137è¡Œï¼ˆ16è¡Œï¼‰

**ç›®çš„**: å„éƒ½å¸‚ã«ç”³è«‹è€…ãƒ‡ãƒ¼ã‚¿ã‚’äº‹å‰é…ç½®

```javascript
// ã‚¯ãƒ­ã‚¹åˆ†æžç”¨ï¼šå„éƒ½å¸‚ã«ç”³è«‹è€…ãƒ‡ãƒ¼ã‚¿ã‚’é…ç½®
if (payload.applicants && Array.isArray(payload.applicants)) {
  const allApplicants = payload.applicants;
  console.log(`[normalizePayload] ç”³è«‹è€…ãƒ‡ãƒ¼ã‚¿ç·æ•°: ${allApplicants.length}ä»¶`);

  cities.forEach(city => {
    // å¸Œæœ›å‹¤å‹™åœ°ã«é¸æŠžåœ°åŸŸãŒå«ã¾ã‚Œã‚‹ç”³è«‹è€…ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    city.applicants = allApplicants.filter(app => {
      const desiredLocs = app.desired_locations || [];
      return desiredLocs.some(loc => loc.municipality === city.name || loc.location === city.id);
    });
  });

  const totalMatched = cities.reduce((sum, city) => sum + (city.applicants ? city.applicants.length : 0), 0);
  console.log(`[normalizePayload] å„éƒ½å¸‚ã¸ã®ç”³è«‹è€…é…ç½®å®Œäº†: åˆè¨ˆ${totalMatched}ä»¶ï¼ˆé‡è¤‡ã‚ã‚Šï¼‰`);
}
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
[Python] Phase 1: Applicants.csv
  - 7,487ä»¶ã®ç”³è«‹è€…ãƒ‡ãƒ¼ã‚¿
  - qualificationsã‚«ãƒ©ãƒ : "ä»‹è­·ç¦ç¥‰å£«,çœ‹è­·å¸«,è‡ªå‹•è»Šé‹è»¢å…è¨±"
  â†“
[GAS] MapDataBridge.gs
  - payload.applicantsé…åˆ—ã¨ã—ã¦è¿”ã™
  â†“
[HTML] normalizePayload()
  - å„éƒ½å¸‚ã«city.applicantsã‚’é…ç½®
  - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°: å¸Œæœ›å‹¤å‹™åœ°ã«è©²å½“ã™ã‚‹ç”³è«‹è€…ã®ã¿
  â†“
[HTML] renderCross()
  - Xè»¸ãƒ»Yè»¸é¸æŠžUIè¡¨ç¤º
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè¡Œ: å¹´é½¢å±¤ Ã— æ€§åˆ¥
  â†“
[HTML] executeCrossTabulation()
  - è³‡æ ¼ãƒã‚¤ãƒãƒ¼ãƒ è§£æžï¼ˆqualificationsãƒ‘ãƒ¼ã‚¹ï¼‰
  - ã‚¯ãƒ­ã‚¹é›†è¨ˆãƒžãƒˆãƒªãƒƒã‚¯ã‚¹æ§‹ç¯‰
  - ãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆï¼ˆãƒ’ãƒ¼ãƒˆãƒžãƒƒãƒ—è¡¨ç¤ºï¼‰
  - Google Chartsãƒ’ãƒ¼ãƒˆãƒžãƒƒãƒ—æç”»
  â†“
[HTML] downloadCrossCSV()
  - BOMä»˜ãUTF-8ã§CSVå‡ºåŠ›
```

---

## ä½¿ç”¨ä¾‹

### ä¾‹1: ä»‹è­·ç¦ç¥‰å£« Ã— å¹´é½¢å±¤

**æ“ä½œ**:
1. Xè»¸: ã€Œä»‹è­·ç¦ç¥‰å£«ã€ï¼ˆè³‡æ ¼ãƒã‚¤ãƒãƒ¼ãƒ ï¼‰
2. Yè»¸: ã€Œå¹´é½¢å±¤ã€
3. ã€ŒðŸ” ã‚¯ãƒ­ã‚¹é›†è¨ˆã‚’å®Ÿè¡Œã€ã‚¯ãƒªãƒƒã‚¯

**çµæžœ**:
```
å¹´é½¢å±¤ \ ä»‹è­·ç¦ç¥‰å£« | ã‚ã‚Š | ãªã— | åˆè¨ˆ
20ä»£æœªæº€           |  10  |  50  |  60
20ä»£               |  80  | 340  | 420
30ä»£               | 150  | 400  | 550
40ä»£               | 120  | 280  | 400
50ä»£               | 180  | 198  | 378
åˆè¨ˆ               | 540  | 1268 | 1748
```

**æ´žå¯Ÿ**:
- 30ä»£ãƒ»50ä»£ã§ä»‹è­·ç¦ç¥‰å£«ä¿æœ‰çŽ‡ãŒé«˜ã„
- 20ä»£ã¯æœ‰è³‡æ ¼è€…ãŒå°‘ãªã„ï¼ˆç ”ä¿®ä¸­å¿ƒã®å¯èƒ½æ€§ï¼‰
- åˆè¨ˆ540äººï¼ˆ30.9%ï¼‰ãŒä»‹è­·ç¦ç¥‰å£«ã‚’ä¿æœ‰

---

### ä¾‹2: æ€§åˆ¥ Ã— çœ‹è­·å¸«

**æ“ä½œ**:
1. Xè»¸: ã€Œçœ‹è­·å¸«ã€ï¼ˆè³‡æ ¼ãƒã‚¤ãƒãƒ¼ãƒ ï¼‰
2. Yè»¸: ã€Œæ€§åˆ¥ã€
3. ã€ŒðŸ” ã‚¯ãƒ­ã‚¹é›†è¨ˆã‚’å®Ÿè¡Œã€ã‚¯ãƒªãƒƒã‚¯

**çµæžœ**:
```
æ€§åˆ¥ \ çœ‹è­·å¸« | ã‚ã‚Š | ãªã— | åˆè¨ˆ
ç”·æ€§         |  10  | 618  | 628
å¥³æ€§         |  30  | 1090 | 1120
åˆè¨ˆ         |  40  | 1708 | 1748
```

**æ´žå¯Ÿ**:
- çœ‹è­·å¸«ã¯å¥³æ€§ãŒå¤šã„ï¼ˆ75%ï¼‰
- å…¨ä½“ã®2.3%ãŒçœ‹è­·å¸«è³‡æ ¼ã‚’ä¿æœ‰
- ç”·æ€§çœ‹è­·å¸«ã¯ç¨€å°‘ï¼ˆ1.6%ï¼‰

---

### ä¾‹3: è»¢è·æ„æ¬² Ã— å°±æ¥­çŠ¶æ…‹

**æ“ä½œ**:
1. Xè»¸: ã€Œå°±æ¥­çŠ¶æ…‹ã€
2. Yè»¸: ã€Œè»¢è·æ„æ¬²ã€
3. ã€ŒðŸ” ã‚¯ãƒ­ã‚¹é›†è¨ˆã‚’å®Ÿè¡Œã€ã‚¯ãƒªãƒƒã‚¯

**çµæžœ**:
```
è»¢è·æ„æ¬² \ å°±æ¥­çŠ¶æ…‹ | å°±æ¥­ä¸­ | é›¢è·ä¸­ | æ–°å’ãƒ»æœªå°±æ¥­ | åˆè¨ˆ
ä½Ž                 |  200   |  50    |  10         | 260
ä¸­                 |  400   | 100    |  20         | 520
é«˜                 |  500   | 150    |  30         | 680
æœ€é«˜               |  200   |  80    |   8         | 288
åˆè¨ˆ               | 1300   | 380    |  68         | 1748
```

**æ´žå¯Ÿ**:
- å°±æ¥­ä¸­ã§ã‚‚è»¢è·æ„æ¬²ã€Œé«˜ã€ãŒå¤šã„ï¼ˆ38.5%ï¼‰
- é›¢è·ä¸­ã¯è»¢è·æ„æ¬²ã€Œæœ€é«˜ã€ã®å‰²åˆãŒé«˜ã„ï¼ˆ21.1%ï¼‰
- æ–°å’ãƒ»æœªå°±æ¥­ã¯å…¨ä½“ã®3.9%ã¨å°‘ãªã„

---

## æŠ€è¡“çš„ãƒ¡ãƒ¢

### è³‡æ ¼ãƒã‚¤ãƒãƒ¼ãƒ è§£æžãƒ­ã‚¸ãƒƒã‚¯

```javascript
function extractAxisValue(applicant, axis) {
  // è³‡æ ¼ãƒã‚¤ãƒãƒ¼ãƒ 
  if (axis.startsWith('qual:')) {
    const qualName = axis.replace('qual:', '');
    const qualifications = (applicant.qualifications || '').split(',').map(q => q.trim());
    return qualifications.includes(qualName) ? 'ã‚ã‚Š' : 'ãªã—';
  }

  // åŸºæœ¬å±žæ€§
  if (axis === 'age_bucket') return applicant.age_bucket || 'ä¸æ˜Ž';
  // ...
}
```

**ãƒã‚¤ãƒ³ãƒˆ**:
- `qualifications`ã‚«ãƒ©ãƒ ã¯æ–‡å­—åˆ—ï¼ˆã‚«ãƒ³ãƒžåŒºåˆ‡ã‚Šï¼‰
- `split(',').map(q => q.trim())`ã§é…åˆ—ã«å¤‰æ›
- `includes(qualName)`ã§ä¿æœ‰åˆ¤å®š
- ã€Œã‚ã‚Š/ãªã—ã€ã®2å€¤ã§è¿”ã™

---

### è»¢è·æ„æ¬²ã®è‡ªå‹•å¤‰æ›

```javascript
if (axis === 'urgency_level') {
  const score = applicant.urgency_score;
  if (score === undefined || score === null) return 'ä¸æ˜Ž';
  if (score >= 8) return 'æœ€é«˜';
  if (score >= 6) return 'é«˜';
  if (score >= 4) return 'ä¸­';
  return 'ä½Ž';
}
```

**ãƒã‚¤ãƒ³ãƒˆ**:
- `urgency_score`ï¼ˆ0-10ã‚¹ã‚³ã‚¢ï¼‰ã‚’4æ®µéšŽã«å¤‰æ›
- é–¾å€¤: 8ä»¥ä¸Š=æœ€é«˜ã€6ä»¥ä¸Š=é«˜ã€4ä»¥ä¸Š=ä¸­ã€ãã®ä»–=ä½Ž

---

### ãƒ’ãƒ¼ãƒˆãƒžãƒƒãƒ—è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯

```javascript
const bgColor = count > 0 ? `rgba(66, 133, 244, ${Math.min(count / 50, 0.8)})` : '#fff';
```

**ãƒã‚¤ãƒ³ãƒˆ**:
- ä»¶æ•°ãŒå¤šã„ã»ã©æ¿ƒã„é’è‰²
- æœ€å¤§é€æ˜Žåº¦: 0.8ï¼ˆ80%ï¼‰
- åŸºæº–: 50ä»¶ã§æœ€å¤§æ¿ƒåº¦

---

### CSVå‡ºåŠ›ï¼ˆæ—¥æœ¬èªžå¯¾å¿œï¼‰

```javascript
const bom = '\uFEFF';
const blob = new Blob([bom + csv], { type: 'text/csv;charset=utf-8;' });
const link = document.createElement('a');
link.href = URL.createObjectURL(blob);
link.download = `cross_${labelY}_${labelX}_${new Date().toISOString().slice(0,10)}.csv`;
link.click();
```

**ãƒã‚¤ãƒ³ãƒˆ**:
- BOMï¼ˆ`\uFEFF`ï¼‰ã‚’å…ˆé ­ã«è¿½åŠ 
- UTF-8ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
- ãƒ•ã‚¡ã‚¤ãƒ«å: `cross_æ€§åˆ¥_å¹´é½¢å±¤_2025-11-03.csv`

---

## ãƒ¡ãƒªãƒƒãƒˆ

### 1. ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š
- **æƒ…å ±éŽå¤šã®è§£æ¶ˆ**: å¿…è¦ãªè»¸ã®ã¿è¡¨ç¤º
- **æŸ”è»Ÿãªåˆ†æž**: 27ç¨®é¡žã®çµ„ã¿åˆã‚ã›ï¼ˆ7åŸºæœ¬ + 20è³‡æ ¼ï¼‰Ã— 27 = 729é€šã‚Š
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **: ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³å¤‰æ›´ â†’ å³åº§ã«å†é›†è¨ˆ

### 2. è³‡æ ¼ãƒã‚¤ãƒãƒ¼ãƒ å¯¾å¿œ
- **æŽ¡ç”¨ãƒ‹ãƒ¼ã‚ºã«ç›´çµ**: ã€Œä»‹è­·ç¦ç¥‰å£«ã‚’æŒã£ã¦ã„ã‚‹30ä»£å¥³æ€§ã¯ä½•äººï¼Ÿã€ã«å³ç­”
- **å¸Œå°‘è³‡æ ¼ã®å¯è¦–åŒ–**: ã€Œçœ‹è­·å¸«ã‚’æŒã£ã¦ã„ã‚‹é›¢è·ä¸­ã®äººã¯ä½•äººï¼Ÿã€
- **è¤‡æ•°è³‡æ ¼ã®çµ„ã¿åˆã‚ã›**: ã€Œä»‹è­·ç¦ç¥‰å£« Ã— çœ‹è­·å¸«ã€ã®ã‚¯ãƒ­ã‚¹é›†è¨ˆã‚‚å¯èƒ½ï¼ˆå°†æ¥æ‹¡å¼µï¼‰

### 3. ãƒ‡ãƒ¼ã‚¿ä¸»å°Žæ„æ€æ±ºå®š
- **CSVå‡ºåŠ›**: çµŒå–¶ãƒ¬ãƒãƒ¼ãƒˆã«æ´»ç”¨
- **ãƒ’ãƒ¼ãƒˆãƒžãƒƒãƒ—å¯è¦–åŒ–**: ãƒ‘ã‚¿ãƒ¼ãƒ³ç™ºè¦‹ãŒå®¹æ˜“
- **é¸æŠžåœ°åŸŸè»¸å¯¾å¿œ**: åœ°åŸŸã”ã¨ã®æˆ¦ç•¥ç«‹æ¡ˆ

---

## æ¤œè¨¼æ–¹æ³•

### 1. GASã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
```javascript
// MapPhase12_14_DataBridge.gs
// æ—¢ã«all_recordsè¿½åŠ æ¸ˆã¿ï¼ˆPhase 12-14ï¼‰
```

### 2. HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’GASãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é…ç½®
- `map_complete_integrated.html`ã‚’æ›´æ–°

### 3. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒMAPåˆ†æžã€ã‚’èµ·å‹•
- GASãƒ¡ãƒ‹ãƒ¥ãƒ¼: ã€Œãƒ‡ãƒ¼ã‚¿å‡¦ç†ã€â†’ã€Œåœ°å›³è¡¨ç¤ºï¼ˆãƒãƒ–ãƒ«ï¼‰ã€

### 4. ã‚¯ãƒ­ã‚¹åˆ†æžã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¡¨ç¤º: ã€Œå¹´é½¢å±¤ Ã— æ€§åˆ¥ã€

### 5. è³‡æ ¼ãƒã‚¤ãƒãƒ¼ãƒ ã‚’è©¦ã™
- Xè»¸: ã€Œä»‹è­·ç¦ç¥‰å£«ã€
- Yè»¸: ã€Œå¹´é½¢å±¤ã€
- ã€ŒðŸ” ã‚¯ãƒ­ã‚¹é›†è¨ˆã‚’å®Ÿè¡Œã€ã‚¯ãƒªãƒƒã‚¯
- ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‹ãƒãƒ£ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

### 6. CSVå‡ºåŠ›ã‚’è©¦ã™
- ã€ŒðŸ“¥ CSVå‡ºåŠ›ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
- `cross_å¹´é½¢å±¤_ä»‹è­·ç¦ç¥‰å£«_2025-11-03.csv`ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- Excelã§é–‹ã„ã¦æ—¥æœ¬èªžè¡¨ç¤ºã‚’ç¢ºèª

---

## ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

### æ¡ˆ1: è¤‡æ•°è³‡æ ¼ã®AND/ORæ¤œç´¢
**ç¾çŠ¶**: 1ã¤ã®è³‡æ ¼ã®ã¿é¸æŠžå¯èƒ½
**æ‹¡å¼µæ¡ˆ**: ã€Œä»‹è­·ç¦ç¥‰å£« AND çœ‹è­·å¸«ã€ã€Œä»‹è­·ç¦ç¥‰å£« OR çœ‹è­·å¸«ã€

```javascript
// ä¾‹ï¼šANDæ¤œç´¢
if (axis === 'qual:ä»‹è­·ç¦ç¥‰å£«+çœ‹è­·å¸«') {
  const qualifications = (applicant.qualifications || '').split(',').map(q => q.trim());
  const hasKaigo = qualifications.includes('ä»‹è­·ç¦ç¥‰å£«');
  const hasKango = qualifications.includes('çœ‹è­·å¸«');
  return (hasKaigo && hasKango) ? 'ã‚ã‚Š' : 'ãªã—';
}
```

### æ¡ˆ2: è³‡æ ¼æ•°ã«ã‚ˆã‚‹ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
**ç¾çŠ¶**: ãƒã‚¤ãƒãƒ¼ãƒ ã®ã¿
**æ‹¡å¼µæ¡ˆ**: ã€Œ0å€‹/1-2å€‹/3å€‹ä»¥ä¸Šã€ã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–

```javascript
if (axis === 'qualification_count') {
  const count = (applicant.qualifications || '').split(',').filter(q => q.trim()).length;
  if (count === 0) return '0å€‹';
  if (count <= 2) return '1-2å€‹';
  return '3å€‹ä»¥ä¸Š';
}
```

### æ¡ˆ3: 3æ¬¡å…ƒã‚¯ãƒ­ã‚¹é›†è¨ˆ
**ç¾çŠ¶**: 2è»¸ï¼ˆX Ã— Yï¼‰
**æ‹¡å¼µæ¡ˆ**: 3è»¸ï¼ˆX Ã— Y Ã— Zï¼‰

ä¾‹: ã€Œå¹´é½¢å±¤ Ã— æ€§åˆ¥ Ã— ä»‹è­·ç¦ç¥‰å£«ã€
- 20ä»£ç”·æ€§Ã—ä»‹è­·ç¦ç¥‰å£«ã‚ã‚Š: 10äºº
- 20ä»£ç”·æ€§Ã—ä»‹è­·ç¦ç¥‰å£«ãªã—: 50äºº
- 20ä»£å¥³æ€§Ã—ä»‹è­·ç¦ç¥‰å£«ã‚ã‚Š: 30äºº
- ...

### æ¡ˆ4: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
**ç¾çŠ¶**: å…¨ãƒ‡ãƒ¼ã‚¿ã‚’é›†è¨ˆ
**æ‹¡å¼µæ¡ˆ**: é›†è¨ˆå‰ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

ä¾‹: ã€Œå°±æ¥­ä¸­ã®äººã®ã¿ã€ã€Œè»¢è·æ„æ¬²ãŒé«˜ä»¥ä¸Šã®äººã®ã¿ã€ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° â†’ ã‚¯ãƒ­ã‚¹é›†è¨ˆ

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹è€ƒæ…®

### å‡¦ç†æ™‚é–“ï¼ˆæŽ¨å®šï¼‰
- **ç”³è«‹è€…ãƒ‡ãƒ¼ã‚¿å–å¾—**: O(n) - 1,748ä»¶ã§~10ms
- **ã‚¯ãƒ­ã‚¹é›†è¨ˆ**: O(n) - 1,748ä»¶ã§~20ms
- **ãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆ**: O(rows Ã— cols) - æœ€å¤§10Ã—10ã§~5ms
- **ãƒãƒ£ãƒ¼ãƒˆæç”»**: O(rows Ã— cols) - Google Charts APIã§~50ms

**åˆè¨ˆ**: ç´„85msï¼ˆååˆ†é«˜é€Ÿï¼‰

### ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- **city.applicants**: éƒ½å¸‚ã”ã¨ã«æ•°ç™¾KBï¼ˆåˆè¨ˆæ•°MBï¼‰
- **crossMatrix**: æœ€å¤§10Ã—10ãƒžãƒˆãƒªãƒƒã‚¯ã‚¹ = æ•°KB
- **chartData**: Google Chartsç”¨é…åˆ— = æ•°KB

**åˆè¨ˆ**: æ•°MBï¼ˆå•é¡Œãªã—ï¼‰

---

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±

- **å¤‰æ›´å‰**: v2.1ï¼ˆå›ºå®šãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤ºï¼‰
- **å¤‰æ›´å¾Œ**: v2.2ï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ­ã‚¹é›†è¨ˆï¼‰
- **Pythonå´å¤‰æ›´**: ãªã—
- **GASå´å¤‰æ›´**: ãªã—
- **HTMLå´å¤‰æ›´**:
  - `renderCross()`: å®Œå…¨æ›¸ãæ›ãˆï¼ˆ94è¡Œ â†’ 369è¡Œï¼‰
  - `normalizePayload()`: ç”³è«‹è€…ãƒ‡ãƒ¼ã‚¿é…ç½®ãƒ­ã‚¸ãƒƒã‚¯è¿½åŠ ï¼ˆ16è¡Œï¼‰

---

## å‚è€ƒè³‡æ–™

- `Applicants.csv`: `data/output_v2/phase1/Applicants.csv`
- HTMLå®Ÿè£…: `gas_files/html/map_complete_integrated.html` (line 3079-3447)
- Phase 12-14å†è¨­è¨ˆè¨ˆç”»: `docs/PHASE12-14_SELECTED_REGION_COMPLETE_REDESIGN.md`
- Phase 14å†è¨­è¨ˆè¨ˆç”»: `docs/PHASE14_SELECTED_REGION_REDESIGN.md`
