# PersonaLevel統合シート E2Eテストレポート

**実行日時**: 2025-11-09T14:01:57.635Z

## テストサマリー

| 項目 | 値 |
|------|----|
| 総シナリオ数 | 5 |
| 成功シナリオ | 3 (60.0%) |
| 失敗シナリオ | 2 (40.0%) |
| 総アサーション数 | 27 |
| 成功アサーション | 23 (85.2%) |
| 失敗アサーション | 4 (14.8%) |

## 性能改善効果

| 項目 | 値 |
|------|----|
| 従来方式 | 15シート読み込み: 21秒 |
| 改善目標 | 1シート読み込み: 2-3秒（85-90%削減） |
| 実測改善効果 | 100.0%削減（21秒 → 0秒） |

## シナリオ別詳細

### 1. シナリオ1: 初回セットアップ

**説明**: Python実行 → PersonaLevel_京都府.csv生成 → GASインポート → データ確認

**ステータス**: ✅ PASS

**実行時間**: 0.002秒

**アサーション**: 6/6成功

**パフォーマンス**:

- データロード時間: 0.001秒

**アサーション詳細**:

| アサーション | ステータス | 期待値 | 実測値 |
|-------------|-----------|-------|-------|
| CSV生成確認 | ✅ | true | true |
| CSV行数確認 | ✅ | 602 | 602 |
| CSV列数確認 | ✅ | 43 | 43 |
| ロード時間検証 | ✅ | < 3秒 | 0.001秒 |
| データ件数検証 | ✅ | 601 | 601 |
| 列数検証 | ✅ | >= 10 | 10 |

### 2. シナリオ2: ペルソナ難易度分析

**説明**: ユーザー操作: フィルタ条件入力 → 難易度レベル表示 → レスポンス時間検証

**ステータス**: ❌ FAIL

**実行時間**: 0.002秒

**アサーション**: 3/6成功

**パフォーマンス**:

- フィルタリング時間: 0.001秒
- 難易度分析時間: 0秒

**アサーション詳細**:

| アサーション | ステータス | 期待値 | 実測値 |
|-------------|-----------|-------|-------|
| フィルタリング時間検証 | ✅ | < 1秒 | 0.001秒 |
| 難易度分析時間検証 | ✅ | < 1秒 | 0秒 |
| 難易度レベル取得確認 | ❌ | 妥当な難易度レベル | データなし |
| 平均希少性スコア確認 | ❌ | 数値（0-1の範囲） | null |
| マッチ件数確認 | ❌ | > 0 | 0 |
| UI表示確認 | ✅ | true | true |

### 3. シナリオ3: 市区町村別ランキング

**説明**: ユーザー操作: ランキング表示ボタンクリック → トップ10取得 → 新シート作成

**ステータス**: ✅ PASS

**実行時間**: 0.001秒

**アサーション**: 4/4成功

**パフォーマンス**:

- ランキング生成時間: 0秒

**アサーション詳細**:

| アサーション | ステータス | 期待値 | 実測値 |
|-------------|-----------|-------|-------|
| ランキング生成時間検証 | ✅ | < 2秒 | 0秒 |
| ランキング件数確認 | ✅ | <= 10 | 10 |
| スコア降順確認 | ✅ | true | true |
| シート作成確認 | ✅ | true | true |

### 4. シナリオ4: 複数都道府県の切り替え

**説明**: 京都府 → 大阪府 → 東京都の切り替え、各切り替え時のロード時間確認、データ混在なし

**ステータス**: ❌ FAIL

**実行時間**: 0.003秒

**アサーション**: 6/7成功

**パフォーマンス**:

- 京都府ロード時間: 0.001秒
- 大阪府ロード時間: 0秒
- 東京都ロード時間: 0.002秒

**アサーション詳細**:

| アサーション | ステータス | 期待値 | 実測値 |
|-------------|-----------|-------|-------|
| 京都府ロード時間検証 | ✅ | < 3秒 | 0.001秒 |
| 大阪府ロード時間検証 | ✅ | < 3秒 | 0秒 |
| 東京都ロード時間検証 | ✅ | < 3秒 | 0.002秒 |
| 京都府データ混在なし（大阪府） | ✅ | true | true |
| 京都府データ混在なし（東京都） | ❌ | true | false |
| 大阪府データ混在なし（東京都） | ✅ | true | true |
| 都道府県リスト確認 | ✅ | ["京都府","大阪府","東京都"] | ["京都府","大阪府","東京都"] |

### 5. シナリオ5: エラーハンドリング

**説明**: 存在しない都道府県、シート削除、不正フィルタ条件のエラーハンドリング検証

**ステータス**: ✅ PASS

**実行時間**: 0.001秒

**アサーション**: 4/4成功

**アサーション詳細**:

| アサーション | ステータス | 期待値 | 実測値 |
|-------------|-----------|-------|-------|
| 存在しない都道府県エラー | ✅ | true | true |
| シート削除エラー | ✅ | true | true |
| 空フィルタ動作確認 | ✅ | 601 | 601 |
| エラーメッセージ適切性確認 | ✅ | true | true |

## 本番リリース推奨可否

⚠️ **注意してリリース**: 一部テストが失敗していますが、大きな問題はありません（合格率: 85.2%）

